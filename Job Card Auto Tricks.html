<html>

<head>
    <link href="J.css" rel="stylesheet">
    <title>JOB CARD</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.min.css">
    <script src="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet">


</head>


</head>

<body>
    <center>
        <h3 style="font-family: Arial, Helvetica, sans-serif;">JOB CARD</h3>
        <table id="header">
            <tr>
                <td>
                    <img src="p1.jpeg" width="250px" height="60px">
                </td>
                <td id="td2">
                    <img src="p2.png" width="250px" height="60px" style="margin-left: 100px;">
                </td>
            </tr>
        </table>


        <div style="padding-left: px;">
            <div class="box2">
                <div style="padding-top:5px;"><b style="margin-left: 5px;">Cust Name:</b><input type="text" size="91">
                </div>
                <div style="padding-top:px;"><b style="margin-left: 5px;">Addres:</b><input type="text" size="95"><b>
                        JOB NO.</b><input type="text" class="jobNo" size="1"></div>
                <div style="padding-top:5px;"><b style="margin-left: 5px;">Advisor:</b><input type="text" size="25"><b>
                        REG NO.</b><input type="text" size="18"><b> Technician</b><input type="text" size="18"></div>
                <div style="padding-top:8px;"><b style="margin-left: 5px;">User Name:</b><input type="text"
                        size="21"><b> Model </b><input type="text" size="20"><b> Chassis</b><input type="text"
                        size="19"><b> Date </b><input type="date"></div>
                <div style="padding-top:8px;">
                    <div style="padding-bottom:8px;"><b style="margin-left: 5px;">Mob No.:</b><input type="text"
                            size="24"><b> KMS </b><input type="text" size="22"><b> Engine </b><input type="text"
                            size="18"><b> Entery Time </b><input type="time"  id="entryTime">

                    </div>
                </div>
            </div>

            <div style="padding-top: 4px;">
                <div class="box3">
                    <img src="p3.png" width="770px" height="60px">
                </div>
                <div class="box4">
                    <b>
                        <p>Type of Service : Paid Service / Running Repaird / MOS / Accident Repair</p>
                    </b>
                </div>
            </div>

            <div style="padding-top: 1px;">
                
            </div>

            <div style="padding-top: 4px;">
                <div class="box5">
                    <div id="example" class="hot "></div>
                </div>
            </div>

            <div class="con" style="padding-top: 4px;">

                <div class="box6">
                    <p> Note:<input type="text" size="56"></p>
                    <input type="text" size="60" style=" margin-left: 15px;">
                    <input type="text" size="60" style="margin-top: 15px; margin-left: 15px;">
                    <input type="text" size="60" style="margin-top: 15px; margin-bottom:25px ;  margin-left: 15px;">
                    <div class="box8">
                        <table>
                            <tr>
                                <td>
                                    <input type="text" size="15" style="margin-top: 20px; margin-left: 13px;">
                                </td>
                                <td>
                                    <input type="text" size="15" style="margin-top: 20px; margin-left: 18px;">
                                </td>
                                <td>
                                    <input type="text" size="15" style="margin-top: 20px; margin-left: 18px;">
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <p style="margin-left: 18px;margin-bottom: 10px;">INSURANCE CO.:</p>
                                </td>
                                <td>
                                    <p style="margin-left: 43px; margin-bottom: 10px;">POLICY NO.</p>
                                </td>
                                <td>
                                    <p style="margin-left: 23px; margin-bottom: 10px;">DATA OF EXPIRY:</p>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="box9">
                        <div class="box10">
                            <br>
                            &nbsp Road Test done Kms <br>
                            &nbsp along with customer <br>
                            &nbsp YES <input type="radio" name="fav_language">
                            &nbsp NO <input type="radio" name="fav_language" style="margin-bottom: 15px;">

                            <div class="box12">
                                <br>
                                KMS <input type="text" size="12" name="" id=""> to &nbsp<br>
                                KMS <input type="text" size="12" style="margin-bottom: 10px;">
                            </div>
                            <div class="box12">
                                <div id="example3" class="hot"></div>
                            </div>
                        </div>
                        <div class="box11">
                            <p> I hereby authorised the above mentioned job to be executed <br>
                                using the required material. Also that my vehicle will be stored,<br>
                                test deiven and reaired at my risk on road & workshop.</p><br>
                            <table id="tbl_bottom">
                                <tr>
                                    <td><input type="text" size="13" style="margin-left: 4px;"></td>
                                    <td><input type="text" size="13" style="margin-left: 14px;"></td>
                                </tr>

                                <tr>
                                    <td>
                                        <p style="margin-left: 5px;">Customer Singnature</p>
                                    </td>
                                    <td>
                                        <p style="margin-left: 5px;">Service Advisor Name & Sing</p>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>


                <div class="box7">
                    <div class="img" id="imgWrapper">
                        <!-- <input type="checkbox" name="" id="front"> -->
                    </div>
                    <!-- <img src="car.png" alt="" width="50%" height="90%" style="padding-top: 5%;"> -->
                    <div class="box13">
                        <div class="fuleing">
                            <input type="checkbox" name="" id="fule1">
                            <input type="checkbox" name="" id="fule2">
                            <input type="checkbox" name="" id="fule3">
                        <!-- <img src="fule2.jpg" alt="" width="99.9%" height="12%"> <br> -->
                        </div>
                        <div id="example2" class="hot2 "></div>
                    </div>
                </div>
            </div>

            <table id="tbl_footer">
                <tr>
                    <td>Pritesh Patel</td>
                    <td>| &nbsp &nbsp &nbsp Dipak Panchal</td>
                    <td>| &nbsp &nbsp &nbsp Sipin Singh</td>
                </tr>

                <tr>
                    <td>98249 49027</td>
                    <td>| &nbsp &nbsp &nbsp 99989 63841</td>
                    <td>| &nbsp &nbsp &nbsp 99987 49967</td>
                </tr>
            </table>

    </center>

    <div class="box14">
        <div id="example4" class="hot4 "></div>
    </div>
    <div class="box15">
        SIGNATURE OF SUPERVISOR <input type="text" size="20"><br>
    </div>
    <center>
        <div class="con2">
            <div class="box16">
                <div class="box17">
                    <div id="example5" class="hot5"></div>
                </div>
            </div>
            <div class="box18">
                <div class="box19">
                 ROAD TEST BY : KM OUT <input type="text" size="10" style="margin-top: 12px;"><br>
                 SING.: <input type="text" size="11"> IN <input type="text" size="11" style="margin-bottom:8px">
                </div>
                <div class="box20">
                    &nbsp REQD. WORK : <br>
                    <input type="text" size="45" style="margin-left: 1px;"><br>
                    <input type="text" size="45" style="margin-left: 1px;"><br>
                    <input type="text" size="45" style="margin-left: 1px;"><br>
                    <input type="text" size="45" style="margin-left: 1px;"><br>
                    <input type="text" size="45" style="margin-left: 1px;"><br>
                    <input type="text" size="45" style="margin-left: 1px;"><br>
                    <input type="text" size="45" style="margin-left: 1px;"><br>
                    <input type="text" size="45" style="margin-left: 1px;margin-bottom: 15px;"><br>
                   
                </div>
            </div>

        </div>
        <button id="printButton" onclick="printPage()">Print <i class="ri-printer-fill"></i></button>
         <button id="clearButton">Clear Checkboxes</button>
    </center>
    <script>
        // Function to create a checkbox element
        function createCheckbox(x, y) {
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.style.position = 'absolute';
            checkbox.style.left = `${x}px`;
            checkbox.style.top = `${y}px`;
            document.getElementById('imgWrapper').appendChild(checkbox);
        }

        // Event listener for double-click on the .img div
        document.getElementById('imgWrapper').addEventListener('dblclick', function (event) {
            const x = event.clientX - this.getBoundingClientRect().left;
            const y = event.clientY - this.getBoundingClientRect().top;
            createCheckbox(x, y);
        });

        // Function to clear all checkboxes
        function clearCheckboxes() {
            const imgWrapper = document.getElementById('imgWrapper');
            const checkboxes = imgWrapper.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(function (checkbox) {
                checkbox.remove();
            });
        }

        // Event listener for the clear button
        document.getElementById('clearButton').addEventListener('click', function () {
            clearCheckboxes();
        });
    </script>

   
    <script>
        const container = document.querySelector('#example');
        const hot = new Handsontable(container, {
            data: [
                ['Addional Job/Repair (to be filled by customers)', 'Service Advisor finding based on probing with customer', 'Description', 'Parts', 'Labour'],
                ['', '', '', '', ''],
                ['', '', '', '', ''],
                ['', '', '', '', ''],
                ['', '', '', '', ''],
                ['', '', '', '', ''],
                ['', '', '', '', ''],
                ['', '', '', '', ''],
                ['', '', '', '', ''],
                ['', '', '', '', ''],
                ['', '', '', '', ''],
                ['', '', '', '', ''],
                ['', '', '', '', ''],
                ['', '', '', '', ''],
                ['', '', '', '', ''],
                ['', '', 'Total of Parts & Labour', '', ''],
                ['', '', 'Total Cost', '', ''],
            ],

            height: 'auto',
            autoWrapRow: true,
            autoWrapCol: true,
            licenseKey: 'non-commercial-and-evaluation',
        });

        // Calculate totals for Parts and Labour columns
        hot.addHook('afterChange', (changes, source) => {
            if (source === 'edit') {
                const data2 = hot.getData();
                const partsColumnIndex = 3; // Index of the Parts column
                const labourColumnIndex = 4; // Index of the Labour column

                let totalParts = 0;
                let totalLabour = 0;

                for (let i = 1; i < data2.length - 2; i++) {
                    totalParts += parseFloat(data2[i][partsColumnIndex]) || 0;
                    totalLabour += parseFloat(data2[i][labourColumnIndex]) || 0;
                }

                // Update the second-to-last row with the calculated totals (rounded to integers)
                data2[data2.length - 2][partsColumnIndex] = Math.round(totalParts);
                data2[data2.length - 2][labourColumnIndex] = Math.round(totalLabour);

                // Calculate the sum of "Total of Parts & Labour" and "Total Cost"
                const totalSum = Math.round(data2[data2.length - 2][partsColumnIndex] + data2[data2.length - 2][labourColumnIndex]);
                data2[data2.length - 1][labourColumnIndex] = totalSum;

                // Render the updated data
                hot.loadData(data2);
            }
        });
    </script>
    <script>

        const container2 = document.querySelector('#example2');
        const hot2 = new Handsontable(container2, {
            data: [
                ['SERVICE BOOK', false],
                ['JACK & HANDLE', false],
                ['TOOL KIT', false],
                ['MATS/CARPET', false],
                ['MUD FLAPS', false],
                ['STEREO/TV', false],
                ['RADIO/SPEAKERS', false],
                ['CLOCK', false],
                ['BATTERY', false],
                ['KITCHEN/REMOTE', false],
                ['CIGRATE LIGHTER', false],
                ['R.V.M/S.V.N', false],
                ['WHEEL CAPS', false],
                ['TYRE MAKE', false],
                ['GLASS CONSITIONS', false],
                ['PENDRIVE', false],
            ],

            columns: [
                { data: 0 }, // First column (text)
                { data: 1, type: 'checkbox' }, // Second column (checkbox)
            ],

            height: 'auto',
            autoWrapRow: true,
            autoWrapCol: true,
            licenseKey: 'non-commercial-and-evaluation' // for non-commercial use only
        });
    </script>

    <script>
        const container3 = document.querySelector('#example3');
        const hot3 = new Handsontable(container3, {
            data: [

                ['PROMISED DATE', ''],
                ['PROMISED TIME', '']
            ],

            height: 'auto',
            autoWrapRow: true,
            autoWrapCol: true,
            licenseKey: 'non-commercial-and-evaluation' // for non-commercial use only
        });
    </script>

    <script>

        const container4 = document.querySelector('#example4');
        const data = [
            ['Sr.', 'Part Name', 'Part Number', 'Qty', 'Amount'],
            ['1', '', '', '', ''],
            ['2', '', '', '', ''],
            ['3', '', '', '', ''],
            ['4', '', '', '', ''],
            ['5', '', '', '', ''],
            ['6', '', '', '', ''],
            ['7', '', '', '', ''],
            ['8', '', '', '', ''],
            ['9', '', '', '', ''],
            ['10', '', '', '', ''],
            ['11', '', '', '', ''],
            ['12', '', '', '', ''],
            ['13', '', '', '', ''],
            ['14', '', '', '', ''],
            ['15', '', '', '', ''],
            ['16', '', '', '', ''],
            ['17', '', '', '', ''],
            ['18', '', '', '', ''],
            ['19', '', '', '', ''],
            ['20', '', '', '', ''],
            ['21', '', '', '', ''],
            ['22', '', '', '', ''],
            ['23', '', '', '', ''],
            ['24', '', '', '', ''],
            ['25', '', '', '', ''],
            ['26', '', '', '', ''],
            [, , 'TOTAL AMOUNT', '', ''],


        ];

      
        const hot4 = new Handsontable(container4, {
            data,
            startRows: 5,
            startCols: 5,
            height: 'auto',
            width: 'auto',
            autoWrapRow: true,
            autoWrapCol: true,
            colWidths: [50, 380, 300, 60, 110],
            licenseKey: 'non-commercial-and-evaluation',
            cells: function (row, col) {
                return { className: 'center-content' };
            }
        });
    </script>

    <script>


        const container5 = document.querySelector('#example5');
        const hot5 = new Handsontable(container5, {
            data: [
                ['Sr.', 'Labour Description', 'Amount'],
                ['1','' , ''],
                ['2','' ,'' ],
                ['3', '','' ],
                ['4','' , ''],
                ['5', '', ''],
                ['6','' ,'' ],
                ['7','' , ''],
                ['8', '', ''],
                ['9', '', ''],
                ['10','' ,''],
            ],

            height: 'auto',
            autoWrapRow: true,
            autoWrapCol: true,
            licenseKey: 'non-commercial-and-evaluation',
            colWidths: [50, 350, 130],
            cells: function (row, col) {
                return { className: 'center-content' };
            }
        })
    </script>

    <script>


        function printPage() {
            // Hide the print button before printing
            document.getElementById("printButton").style.visibility = "hidden";
            document.getElementById("clearButton").style.visibility = "hidden";
            // Trigger printing
            window.print();
            // Show the print button after printing (using a timeout to ensure it's visible after the print dialog closes)
            setTimeout(function () {
                document.getElementById("printButton").style.visibility = "visible";
                document.getElementById("clearButton").style.visibility = "visible";
            }, 100);
        }
    </script>

<!-- <script>
    function getCurrentDateTime() {
        const now = new Date();
        const year = now.getFullYear();
        let month = now.getMonth() + 1;
        let day = now.getDate();
        let hours = now.getHours();
        let minutes = now.getMinutes();

        // Add leading zeros if needed
        month = month < 10 ? '0' + month : month;
        day = day < 10 ? '0' + day : day;
        hours = hours < 10 ? '0' + hours : hours;
        minutes = minutes < 10 ? '0' + minutes : minutes;

        return `${year}-${month}-${day}T${hours}:${minutes}`; // Date and time format: YYYY-MM-DDTHH:MM
    }

    function updateDateTime() {
        const dateInput = document.querySelector('input[type="date"]');
        const timeInput = document.getElementById('entryTime');
        
        const currentDateTime = getCurrentDateTime();
        dateInput.value = currentDateTime.slice(0, 10);
        timeInput.value = currentDateTime.slice(11, 16);
    }

    // Call updateDateTime initially to set the date and time
    updateDateTime();

    setInterval(updateDateTime, 1000);
</script> -->


<script>
    function getCurrentDateTime() {
        const now = new Date();
        const year = now.getFullYear();
        let month = now.getMonth() + 1;
        let day = now.getDate();
        let hours = now.getHours();
        let minutes = now.getMinutes();

        // Add leading zeros if needed
        month = month < 10 ? '0' + month : month;
        day = day < 10 ? '0' + day : day;
        hours = hours < 10 ? '0' + hours : hours;
        minutes = minutes < 10 ? '0' + minutes : minutes;

        return `${year}-${month}-${day}T${hours}:${minutes}`; // Date and time format: YYYY-MM-DDTHH:MM
    }

    // Set current date and time in the date input element
    const dateInput = document.querySelector('input[type="date"]');
    dateInput.value = getCurrentDateTime().slice(0, 10);

    // Set current time in the time input element
    const timeInput = document.getElementById('entryTime');
    timeInput.value = getCurrentDateTime().slice(11, 16); 

   
</script>


</body>

</html>